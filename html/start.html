<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@1,300&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Doto:ROND@65&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/csshake-slow.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://fav.farm/游볩" />
    <link rel="stylesheet" href="../css/style.css" />
    <title>U.F.S</title>
</head>
<body>
    <!-- <div class="ULT"></div> -->

    <div class="ontop" id="ontop"></div>
    <div class="ontop2" id="ontop2"></div>
    <div class="vs" id="vs"></div>

    <img src="../content/images/ENEMY.png" alt="" style="height: 570px; width: 500px;" id="image1" class="untouchable">
    <img src="../content/images/ENEMY.png" alt="" style="height: 570px; width: 500px;" id="image2" class="invert untouchable">
    <button class="button" id="qbutton">q</button>
    <button class="button" id="sebutton">w</button>
    <button class="button" id="ebutton">e</button>
    <button class="button3" id="debutton">e</button>
    <button class="button3" id="febutton">e</button>
    <button class="button2" id="pbutton">p</button>
    <button class="button2" id="febutton">[</button>
    <button class="button2" id="]button">]</button>
    <script>
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                player1: params.get('player1') || 'Unknown',
                player2: params.get('player2') || 'Unknown'
            };
        }

        const { player1, player2 } = getQueryParams();
        console.log(player1,player2)
        // ${player1}; ${player2};
        
        var audioElement = new Audio();
        audioElement.src = './content/music/battle.mp3';
        
        audioElement.volume = 0.5; // 햆햩혪 햠쮏햣햣 햪혪햡햨쮏 향쒬햨햟
        audioElement.preload = 'auto';

        let reagate = 20
        let happened = 0

        var myListener = function () {
            happened = happened + 1
            if (happened >= reagate) {
                document.removeEventListener('mousemove', myListener, false);
                audioElement.play();
            }    
        };

        document.addEventListener('mousemove', myListener, false);

        let maxhpenemy1 = 100
        let maxhpenemy2 = 100
        let hpenemy1 = 100
        let hpenemy2 = 100

        let punch1 = 10
        let punch2 = 10

        let debounce = false
        let debounce2 = false
        let block1 = false
        let block2 = false

        // CHEATS
        let godmodePLR1 = false
        let godmodePLR2 = false

        let infdamagePLR1 = false
        let infdamagePLR2 = false

        let SECRETMODEplr1 = false
        let SECRETMODEplr2 = true
        //

        let imag = document.querySelector('#image1')
        let imag2 = document.querySelector('#image2')

        let hpenemy1v = document.querySelector('#ontop')
        let hpenemy2v = document.querySelector('#ontop2')

        let vsImag = document.querySelector("#vs")

        let cd = true

        function cdf(who){
            cd = false
            hpenemy1v.textContent = String(hpenemy1) + "/" + String(maxhpenemy1)
            hpenemy2v.textContent = String(hpenemy2) + "/" + String(maxhpenemy2)
            vsImag.display = 'none'
            var audioElement2 = new Audio();
                            audioElement2.src = 'content/music/fight.mp3';
                            audioElement2.volume = 0.25; // 햆햩혪 햠쮏햣햣 햪혪햡햨쮏 향쒬햨햟
                            audioElement2.preload = 'auto';
                            audioElement2.play()
        }
        function cde0(who){
            hpenemy1v.textContent = '0'
            hpenemy2v.textContent = '0'
        }
        function cde1(who){
            hpenemy1v.textContent = '1'
            hpenemy2v.textContent = '1'
        }
        function cde2(who){
            hpenemy1v.textContent = '2'
            hpenemy2v.textContent = '2'
        }
        function cde3(who){
            hpenemy1v.textContent = '3'
            hpenemy2v.textContent = '3'
        }

        setTimeout(cde3, 1000)  
        setTimeout(cde2, 2000)  
        setTimeout(cde1, 3000)  
        setTimeout(cde0, 4000) 
        setTimeout(cdf, 5000)  

        window.addEventListener("keydown", moveRect);
        window.addEventListener("keyup", moveRect2);

        const btn = document.getElementById("ebutton")
        const btn2 = document.getElementById("]button")

        const btn3 = document.getElementById("qbutton")
        const btn4 = document.getElementById("pbutton")

        function damagecontrol(enm,damage) {
            if (enm) {
                if (enm === imag) {
                    hpenemy1 = hpenemy1 - damage
                    hpenemy1v.textContent = String(hpenemy1) + "/" + String(maxhpenemy1)
                }
                if (enm === imag2) {
                    hpenemy2 = hpenemy2 - damage
                    hpenemy2v.textContent = String(hpenemy2) + "/" + String(maxhpenemy2)
                }
            }
        }

        function imagecontrol(image,to){
            if (to) {
                if (to.toLowerCase().endsWith('.png')) {
                    if (player2 === "plankton") {
                        image.src = "../content/images/Plankton/P_"+to
                    }
                    if (player2 === "venom") {
                        image.src = "../content/images/Venom/V_"+to
                    }
                    if (player2 === "ivanzolo2009") {
                        image.src = "../content/images/Ivanzolo/I_"+to
                    }
                    if (player2 === "snoopdogg") {
                        image.src = "../content/images/SnoopDogg/sd.gif"
                    }
                }
                else {
                    // image.src = "../content/images/sd.gif"
                    
                    if (player1 === "plankton") {
                        image.src = "../content/images/Plankton/P_"+to+".png"
                    }
                    if (player1 === "venom") {
                        image.src = "../content/images/Venom/V_"+to+".png"
                    }
                    if (player1 === "ivanzolo2009") {
                        image.src = "../content/images/Ivanzolo/I_"+to+".png"
                    }
                    if (player1 === "snoopdogg") {
                        image.src = "../content/images/SnoopDogg/sd.gif"
                    }
                }
            }
        }

        imagecontrol(imag,"ENEMY")
        imagecontrol(imag2,"ENEMY.png")

        function moveRect2(e){
            if (cd) {
                return
            }
            if (hpenemy2 <= 0) {
                imagecontrol(imag,'VICTORY')
                imagecontrol(imag2,'LOSE.png')
                return
            }
            if (hpenemy1 <= 0) {
                imagecontrol(imag2,'VICTORY.png')
                imagecontrol(imag,'LOSE')
                return
            }
            if (e.key === 'Tab') {
                if (godmodePLR1 == true) {
                    godmodePLR1 = false
                }
                else
                {
                    godmodePLR1 = true
                }
            }
            if (e.key === '`') {
                if (infdamagePLR1 == true) {
                    infdamagePLR1 = false
                }
                else
                {
                    infdamagePLR1 = true
                }
            }
            if (e.key === '-') {
                if (godmodePLR2 == true) {
                    godmodePLR2 = false
                }
                else
                {
                    godmodePLR2 = true
                }
            }
            if (e.key === '+') {
                if (infdamagePLR2 == true) {
                    infdamagePLR2 = false
                }
                else
                {
                    infdamagePLR2 = true
                }
            }
            if (e.key === 'e') {
                if (!debounce) {
                    imagecontrol(imag,'ENEMY')
                    debounce = false
                    block1 = false
                    console.log(btn)
                    btn.style.border = "3px solid white"
                }
            }
            if (e.key === ']') {
                if (!debounce2) {
                    imagecontrol(imag2,'ENEMY.png')
                    debounce2 = false
                    block2 = false
                    btn2.style.border = "3px solid white"
                }
            }
        }
        function moveRect(e){
            if (cd) {
                return
            }
            if (hpenemy2 <= 0) {
                imagecontrol(imag,'VICTORY')
                imagecontrol(imag2,'LOSE.png')
                return
            }
            if (hpenemy1 <= 0) {
                imagecontrol(imag2,'VICTORY.png')
                imagecontrol(imag,'LOSE')
                return
            }
            if (e.key === "w") {
                if (!debounce) {
                    debounce = true
                    function back() {
                        damagecontrol(imag,-5)
                        imagecontrol(imag,'ENEMY')
                        debounce = false
                    }
                    imagecontrol(imag,'drink')
                    setTimeout(back,500)
                }
            }
            if (e.key === "q") {
                btn3.style.border = "3px solid black"
                if (!debounce) {
                    function attack(who){
                        imagecontrol(imag,'anim2')
                        setTimeout(attack3, 100)  
                    }

                    function attack2(who){
                        imagecontrol(imag,'anim1')
                        setTimeout(attack, 200)
                    }

                    function attack3(who){
                        function back(){
                            imagecontrol(imag2,'ENEMY.png')
                        }
                        btn3.style.border = "3px solid white"
                        if (!block2) {
                            var audioElement2 = new Audio();
                            audioElement2.src = 'content/music/udar.mp3';
                            audioElement2.volume = 0.25; // 햆햩혪 햠쮏햣햣 햪혪햡햨쮏 향쒬햨햟
                            audioElement2.preload = 'auto';
                            audioElement2.play()
                            if (!godmodePLR2) {
                                imagecontrol(imag2,'DamagedEnemy.png')
                                setTimeout(back,100)
                                console.log('punch 2 enemy success')
                                if (!infdamagePLR1) {
                                    damagecontrol(imag2,punch1)
                                }
                                else {
                                    // hpenemy2 = hpenemy2 - 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
                                }
                            }
                        }
                        else {
                            
                            var audioElement3 = new Audio();
                            audioElement3.src = 'content/music/blockudar.mp3';
                            audioElement3.volume = 0.25; // 햆햩혪 햠쮏햣햣 햪혪햡햨쮏 향쒬햨햟
                            audioElement3.preload = 'auto';
                            audioElement3.play()
                            imagecontrol(imag2,'ENEMY.png') 
                            debounce2 = false
                            block2 = false
                            btn2.style.border = "3px solid white"
                            console.log('punch 2 enemy fail')
                        }
                        imagecontrol(imag,'ENEMY')
                        debounce = false
                    }  

                    debounce = true
                    setTimeout(attack2, 1)  
                }
            }
            if (e.key === "[") {
                if (!debounce2) {
                    debounce2 = true
                    function back() {
                        imagecontrol(imag2,'ENEMY.png')
                        debounce2 = false
                        damagecontrol(imag2,-5)
                        
                    }
                    imagecontrol(imag2,'drink.png')
                    setTimeout(back,500)
                }
            }
            if (e.key === "p") {
                btn4.style.border = "3px solid black"
                if (!debounce2) {
                    function attack(who){
                        imagecontrol(imag2,'anim2.png')
                        setTimeout(attack3, 100)  
                    }

                    function attack2(who){
                        imagecontrol(imag2,'anim1.png')
                        setTimeout(attack, 200)
                    }

                    function attack3(who){
                        function back(){
                            imagecontrol(imag,'ENEMY')
                        }
                        btn4.style.border = "3px solid white"
                        if (!block1) {
                            var audioElement2 = new Audio();
                            audioElement2.src = 'content/music/udar.mp3';
                            audioElement2.volume = 0.25; // 햆햩혪 햠쮏햣햣 햪혪햡햨쮏 향쒬햨햟
                            audioElement2.preload = 'auto';
                            audioElement2.play()
                            if (!godmodePLR2) {
                                imagecontrol(imag,'DamagedEnemy')
                                setTimeout(back,100)
                                if (!infdamagePLR1) {
                                    damagecontrol(imag,punch2)
                                   
                                }
                                else {
                                    // hpenemy1 = hpenemy1 - 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
                                }
                                console.log('punch 1 enemy success')
                            }
                        }
                        else {
                            
                            var audioElement3 = new Audio();
                            audioElement3.src = 'content/music/blockudar.mp3';
                            audioElement3.volume = 0.25; // 햆햩혪 햠쮏햣햣 햪혪햡햨쮏 향쒬햨햟
                            audioElement3.preload = 'auto';
                            audioElement3.play()
                            imagecontrol(imag,'DamagedEnemy')
                            debounce = false
                            block1 = false
                            console.log(btn)
                            btn.style.border = "3px solid white"
                            console.log('punch 1 enemy fail')
                        }
                        imagecontrol(imag2,'ENEMY.png')
                        debounce2 = false
                    }  

                    debounce2 = true
                    setTimeout(attack2, 1)  
                }
            }
            if (e.key === 'e') {
                if (!debounce) {
                    imagecontrol(imag,'blockenemy')
                    block1 = true
                    btn.style.border = "3px solid black"
                }
            }
            if (e.key === ']') {
                if (!debounce2) {
                    imagecontrol(imag2,'blockenemy.png')
                    block2 = true
                    btn2.style.border = "3px solid black"
                }
            }
        }

        
    </script>
</body>